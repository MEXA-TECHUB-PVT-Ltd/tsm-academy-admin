"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[779],{8779:function(e,n,r){r.r(n);var i=r(74165),t=r(15861),s=r(29439),a=r(61889),o=r(20068),l=r(36151),c=r(20890),d=r(1582),u=r(28029),x=r(47071),h=r(64554),g=r(93044),m=r(72791),p=r(85231),f=r(99372),v=r(72351),Z=r(26564),j=r(37781),b=r(57689),w=r(14473),y=r(81724),k=r(92506),C=r(30748),R=r(80184);n.default=function(){var e=(0,m.useRef)(null),n=(0,m.useState)(null),r=(0,s.Z)(n,2),S=r[0],P=r[1],I=(0,m.useState)(null),z=(0,s.Z)(I,2),B=z[0],W=z[1],A=function(e){var n=e.target.files[0];if(n){W(n);var r=new FileReader;r.onload=function(){P(r.result)},r.readAsDataURL(n)}},D=function(){e.current.click()},q=(0,b.s0)(),F=(0,m.useState)(0),E=(0,s.Z)(F,2),L=E[0],U=E[1],G=(0,m.useState)(""),_=(0,s.Z)(G,2),N=(_[0],_[1]),M=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,w.U2)("program/get");case 3:n=e.sent,console.log("ALL PROGRAMS"),console.log(n),n.error||N(n.result[0].program_id),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){M()}),[]),(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(a.ZP,{container:!0,spacing:2,children:(0,R.jsx)(a.ZP,{item:!0,xs:12,md:12,style:{position:"relative"},children:(0,R.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,R.jsxs)(a.ZP,{item:!0,xs:12,md:12,style:{display:"flex",flexDirection:"row",justifyContent:"left",marginBottom:"2%"},children:[(0,R.jsx)(o.Z,{title:"Back",children:(0,R.jsx)(l.Z,{onClick:function(){q("/reviews")},className:"poppinsRegularBold",sx:{paddingInline:"10px",display:"block",color:"#03356b",backgroundColor:"none",fontSize:"16px",fontWeight:600,borderRadius:"50px",textTransform:"capitalize",transition:"background-color 0.3s, color 0.3s",transitionDelay:"0.3s",marginRight:"10px","&:hover":{backgroundColor:"#03356b",color:"white"}},children:(0,R.jsx)(f.Z,{})})}),(0,R.jsx)(c.Z,{variant:"h3",style:{fontWeight:700},children:"Add Review"})]}),(0,R.jsx)(a.ZP,{item:!0,xs:12,md:12,children:(0,R.jsx)(k.J9,{initialValues:{name:"",review:"",submit:null},validationSchema:y.Ry().shape({name:y.Z_().required("Name is required"),review:y.Z_().required("Review is required")}),onSubmit:function(){var e=(0,t.Z)((0,i.Z)().mark((function e(n,r){var s,a,o,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=r.setErrors,a=r.setStatus,o=r.setSubmitting,r.resetForm;try{console.log(n),console.log(B),null===B||""===B?(0,j.Z)("error","User Image is required"):((c=new Image).src=URL.createObjectURL(B),c.onload=(0,t.Z)((0,i.Z)().mark((function e(){var r,t,s,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.width>500||c.height>500)){e.next=4;break}(0,j.Z)("error","Image dimensions should be 500x500px or less."),e.next=25;break;case 4:return t={image:B},e.next=7,(0,w.nv)(t);case 7:return l=e.sent,console.log(l),o(!0),s={image:null===(r=l)||void 0===r?void 0:r.path,name:n.name,review:n.review,rating:L},e.prev=11,e.next=14,(0,w.v_)("review/createReview",s);case 14:d=e.sent,console.log("ADD Review "),console.log(d),d.error?(console.log("error true"),(0,j.Z)("error",d.message),o(!1)):(setTimeout((function(){(0,j.Z)("success","Review Added Successfully"),q("/reviews")}),1e3),a({success:!1}),o(!1)),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(11),(0,j.Z)("error","Something Went Wrong"),a({success:!1}),o(!1);case 25:case"end":return e.stop()}}),e,null,[[11,20]])})))),a({success:!1}),o(!1)}catch(d){a({success:!1}),s({submit:d.message}),o(!1)}case 2:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),children:function(n){var r=n.errors,i=n.handleBlur,t=n.handleChange,s=n.handleSubmit,o=n.isSubmitting,m=n.touched,f=n.values,j=n.submitForm;return(0,R.jsx)("form",{noValidate:!0,onSubmit:s,children:(0,R.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,R.jsx)(a.ZP,{item:!0,xs:12,md:12,children:(0,R.jsx)(a.ZP,{container:!0,spacing:2,style:{border:"1px solid lightGray",borderRadius:"10px",backgroundColor:"white"},children:(0,R.jsx)(a.ZP,{item:!0,xs:12,md:12,children:(0,R.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,R.jsxs)(a.ZP,{item:!0,xs:12,md:6,style:{padding:"20px"},children:[(0,R.jsxs)(d.Z,{spacing:1,children:[(0,R.jsx)(c.Z,{variant:"h5",children:"Name"}),(0,R.jsx)(u.Z,{id:"email-login",type:"text",value:f.name,name:"name",onBlur:i,onChange:t,fullWidth:!0,error:Boolean(m.name&&r.name)}),m.name&&r.name&&(0,R.jsx)(x.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:r.name})]}),(0,R.jsxs)(d.Z,{spacing:1,children:[(0,R.jsx)(c.Z,{variant:"h5",children:"Review"}),(0,R.jsx)(u.Z,{id:"review",type:"text",value:f.review,name:"review",onBlur:i,onChange:t,fullWidth:!0,multiline:!0,rows:4,error:Boolean(m.review&&r.review)}),m.review&&r.review&&(0,R.jsx)(x.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:r.review})]}),(0,R.jsxs)(d.Z,{spacing:1,children:[(0,R.jsx)(c.Z,{variant:"h5",children:" Rating"}),(0,R.jsx)(C.Z,{name:"size-large",value:L,onChange:function(e,n){U(n)},size:"large"})]})]}),(0,R.jsx)(a.ZP,{item:!0,xs:12,md:6,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,R.jsxs)(d.Z,{spacing:1,children:[""===S||null===S?(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(h.Z,{onClick:D,style:{width:"100%",marginInline:"2%",padding:"15px",backgroundColor:"#f2f0f0",border:"3px dotted #cecece",borderRadius:"10px"},children:(0,R.jsxs)(h.Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",paddingBlock:"10%",flexDirection:"column"},children:[(0,R.jsx)(v.Z,{style:{fontSize:"50px",color:"gray"}}),(0,R.jsx)(c.Z,{variant:"h6",children:"Choose an image"})]})})}):(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(h.Z,{onClick:D,style:{marginInline:"2%",backgroundColor:"#f2f0f0",border:"3px dotted #cecece",borderRadius:"10px",display:"flex",justifyContent:"center",flexDirection:"column"},children:[S&&(0,R.jsx)(g.Z,{src:S,alt:"Selected",style:{width:"auto",height:"200px",border:"1px solid lightGray",borderRadius:"10px"},variant:"square"}),(0,R.jsx)(p.Z,{children:(0,R.jsx)(l.Z,{onClick:function(){return P("")},disableElevation:!0,variant:"outlined",size:"medium",style:{color:"rgb(76 91 104)",fontWeight:700,backgroundColor:"white",border:"1px solid lightGray",boxShadow:" 0px 2px 30px -15px rgba(94,94,107,0.67)",marginBlock:"1%"},color:"secondary",children:"Change Image"})})]})}),(0,R.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},id:"fileInput",onChange:A,ref:e})]})})]})})})}),(0,R.jsxs)(a.ZP,{item:!0,xs:12,align:"right",children:[(0,R.jsx)(l.Z,{disabled:o,startIcon:o?(0,R.jsx)(Z.Z,{color:"#fff",loading:o,size:20}):null,type:"submit",disableElevation:!0,variant:"contained",size:"medium",style:{fontWeight:700,color:"white",boxShadow:" 0px 2px 30px -15px rgba(94,94,107,0.67)",marginInline:"2%"},color:"primary",children:"Save"}),(0,R.jsx)(l.Z,{disabled:o,startIcon:o?(0,R.jsx)(Z.Z,{color:"#fff",loading:o,size:20}):null,onClick:function(){j().then((function(){window.location.reload()}))},disableElevation:!0,variant:"contained",size:"medium",style:{fontWeight:700,color:"white",boxShadow:" 0px 2px 30px -15px rgba(94,94,107,0.67)"},color:"primary",children:"Save & Add More"})]})]})})}})})]})})})})}}}]);
//# sourceMappingURL=779.d5198e74.chunk.js.map